<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giỏ hàng - Cửa Hàng Quần Áo Trẻ Em</title>
    <link rel="stylesheet" href="../css/trangchu.css">
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
</head>
<body>
    <div class="giohang">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <div class="container">
                <a class="navbar-brand" href="#"><img src="../img/logo.png" alt="Logo" style="width: 50px;"></a>
                 <!-- Search bar -->
                 <form class="d-flex mx-auto" role="search">
                    <input class="form-control me-2" type="search" placeholder="Tìm kiếm sản phẩm..." aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">
                        <img src="https://cdn-icons-png.flaticon.com/512/54/54481.png" alt="Tìm kiếm" style="width: 20px; height: 20px;">
                    </button>
                </form>
                
                <div class="d-flex">
                   <!-- Cart Icon -->
                   <a href="../html/giohang.html" class="btn btn-outline-primary mx-1">
                    <img src="https://cdn-icons-png.flaticon.com/512/3144/3144456.png" alt="Giỏ Hàng" style="width: 20px; height: 20px;">
                </a>

                    <!-- Login/Register -->
                    <div class="btn-group">
                        <a href="#" class="btn btn-outline-primary mx-1 dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Menu Icon" style="width: 23px; height: 23px;">
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../html/dangnhap.html">Đăng Nhập</a></li>
                            <li><a class="dropdown-item" href="../html/dangki.html">Đăng Ký</a></li>
                        </ul>
                    </div>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link active" href="../html/trangchu.html">Trang Chủ</a></li>
                        <li class="nav-item"><a class="nav-link" href="../html/sanpham.html">Sản Phẩm</a></li>
                        <li class="nav-item"><a class="nav-link" href="../html/gioithieu.html">Giới Thiệu</a></li>
                        <li class="nav-item"><a class="nav-link" href="../html/lienhe.html">Liên Hệ</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12">
                        <img src="../img/background.png" alt="Background" class="img-fluid w-100" style="max-height: 70vh;">
                    </div>
                </div>
            </div>
        <div class="container mt-4">
            <h3>Giỏ hàng của bạn</h3>
            <div class="table-responsive">
                <table class="table table-bordered" id="cart-table">
                    <thead>
                        <tr>
                            <th>Hình ảnh</th>
                            <th>Sản phẩm</th>
                            <th>Số lượng</th>
                            <th>Giá mỗi sản phẩm</th>
                            <th>Thành tiền</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Sản phẩm 1 -->
                        <tr>
                            <td><img src="../img/aosomibetrai.jpg" alt="Sản phẩm 1" style="width: 70px;"></td>
                            <td>Áo sơ mi bé Trai</td>
                            <td><input type="number" class="form-control quantity" value="2" min="1" data-price="120000"></td>
                            <td>120,000 VND</td>
                            <td class="subtotal">240,000 VND</td>
                            <td><button class="btn btn-danger delete-btn">Xóa</button></td>
                        </tr>
                        <!-- Sản phẩm 2 -->
                        <tr>
                            <td><img src="../img/aokhoacchobe.jpg" alt="Sản phẩm 2" style="width: 70px;"></td>
                            <td>Áo khoác cho bé trai/bé gái</td>
                            <td><input type="number" class="form-control quantity" value="1" min="1" data-price="200000"></td>
                            <td>200,000 VND</td>
                            <td class="subtotal">200,000 VND</td>
                            <td><button class="btn btn-danger delete-btn">Xóa</button></td>
                        </tr>
                        <!-- Sản phẩm 3 -->
                        <tr>
                            <td><img src="../img/quanjeanbetrai.jpg" alt="Sản phẩm 3" style="width: 70px;"></td>
                            <td>Quần jean bé trai</td>
                            <td><input type="number" class="form-control quantity" value="1" min="1" data-price="180000"></td>
                            <td>180,000 VND</td>
                            <td class="subtotal">180,000 VND</td>
                            <td><button class="btn btn-danger delete-btn">Xóa</button></td>
                        </tr>
                        <!-- Sản phẩm 4 -->
                        <tr>
                            <td><img src="../img/quanshortbetrai.png" alt="Sản phẩm 4" style="width: 70px;"></td>
                            <td>Quần short bé trai</td>
                            <td><input type="number" class="form-control quantity" value="1" min="1" data-price="180000"></td>
                            <td>150,000 VND</td>
                            <td class="subtotal">150,000 VND</td>
                            <td><button class="btn btn-danger delete-btn">Xóa</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Tổng giá -->
            <div class="row">
                <div class="col-12 col-md-4 offset-md-8">
                    <table class="table table-bordered">
                        <tr>
                            <td>Tạm tính:</td>
                            <td id="total-price">620,000 VND</td>
                        </tr>
                        <tr>
                            <th>Tổng cộng:</th>
                            <th id="total-price-final">620,000 VND</th>
                        </tr>
                    </table>
                    <button class="btn btn-success w-100" onclick="redirectToCheckout()">Tiến hành thanh toán</button>
                    <script>
                        function redirectToCheckout() {
                            window.location.href = "../html/thanhthoan.html"; 
                        }
                    </script>
                    
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer style="background-color: #ff914d; color: aliceblue; height: 50px;clear: both;">
            <div class="container text-center">
                <p>&copy; 2024 Bé Cưng Baby Shop. All Rights Reserved.</p>
            </div>
        </footer>
    </div>

    <script>
        // Xử lý việc xóa sản phẩm
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const row = this.closest('tr');
                row.remove(); // Xóa dòng hiện tại
                updateTotal(); // Cập nhật lại tổng giá
            });
        });

        // Xử lý việc cập nhật thành tiền khi thay đổi số lượng
        document.querySelectorAll('.quantity').forEach(input => {
            input.addEventListener('change', function() {
                const price = parseInt(this.getAttribute('data-price')); // Lấy giá của sản phẩm
                const quantity = parseInt(this.value); // Lấy số lượng mới
                const subtotalCell = this.closest('tr').querySelector('.subtotal');
                const newSubtotal = price * quantity; // Tính lại thành tiền
                subtotalCell.textContent = newSubtotal.toLocaleString() + ' VND'; // Cập nhật thành tiền

                updateTotal(); // Cập nhật lại tổng giá
            });
        });

        // Hàm cập nhật tổng giá
        function updateTotal() {
            let total = 0;
            document.querySelectorAll('.subtotal').forEach(cell => {
                const subtotal = parseInt(cell.textContent.replace(/\D/g, '')); // Lấy giá trị số
                total += subtotal;
            });
            document.getElementById('total-price').textContent = total.toLocaleString() + ' VND';
            document.getElementById('total-price-final').textContent = total.toLocaleString() + ' VND';
        }

        // Cập nhật tổng giá khi trang được tải lần đầu
        window.addEventListener('load', function() {
            updateTotal();
        });
        function redirectToCheckout() {
    console.log("Redirecting to checkout..."); // Kiểm tra xem hàm có được gọi không
    window.location.href = "../html/thanhthoan.html"; 
}

    </script>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-3">
                    <img src="../img/logo.png" alt="Baby Shop Logo" width="100">
                    <p>
                        Bé Cưng Baby Shop<br>
                        Địa chỉ: 16 Đường số 39, Hiệp Bình Chánh, Thủ Đức<br>
                        Điện thoại: 035 777 0847<br>
                        Email: pntdung221@gmail.com<br>
                    </p>
                </div>
                <div class="col-md-3">
                    <h6>Về Bé Cưng Baby Shop</h6>
                    <ul class="list-unstyled">
                        <li><a href="../html/gioithieu.html">Giới thiệu Về Bé Cưng Baby Shop</a></li>
                        <li><a href="../html/sanpham.html">Danh sách sản Phẩm</li>
                        <li><a href="../html/thongtintuyendung.html">Thông tin Tuyển dụng</a></li>
                        <li><a href="../html/chinhsachbaomat.html">Chính sách bảo mật</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Hỗ trợ khách hàng</h6>
                    <ul class="list-unstyled">
                        <li><a href="#">Quy định đổi trả hàng</a></li>
                        <li><a href="#">Phương thức thanh toán</a></li>
                        <li><a href="#">Phương thức giao hàng</a></li>
                        <li><a href="#">Gửi góp ý / Khiếu nại</a></li>
                        <li><a href="#">Chính sách bảo hành</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h6>Nhận tin khuyến mãi & quà</h6>
                    <input type="email" class="email-input" placeholder="Nhập địa chỉ email của bạn">
                    <button class="btn-apply">Áp dụng</button>
                </div>
            </div>

            <div class="row mt-4">
                <div class="col-md-12 text-center">
                    <div class="social-icons">
                        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733547.png" alt="Facebook" width="30px"></a>
                        <a href="#"><img src="https://cdn-icons-png.flaticon.com/512/733/733558.png" alt="Instagram" width="30px"></a>
                        <a href="#"><img src="../img/logo.png" alt="shop" width="30px"></a>
                    </div>
                    <p class="mt-3">© Bé Cưng Baby Shop. All Rights Reserved.</p>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
